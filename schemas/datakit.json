{
  "fields": [
    {
      "protocols": {
        "required": true,
        "type": "set",
        "default": [
          "grpc",
          "grpcs",
          "http",
          "https"
        ],
        "elements": {
          "type": "string",
          "one_of": [
            "grpc",
            "grpcs",
            "http",
            "https"
          ]
        },
        "description": "A set of strings representing HTTP protocols."
      }
    },
    {
      "config": {
        "required": true,
        "type": "record",
        "fields": [
          {
            "nodes": {
              "required": true,
              "type": "array",
              "len_min": 1,
              "len_max": 64,
              "elements": {
                "description": "datakit nodes",
                "type": "record",
                "subschema_error": "unknown node type: %q, expected one of: branch, cache, call, exit, jq, property, static",
                "subschema_override_parent": true,
                "fields": [
                  {
                    "name": {
                      "description": "A label that uniquely identifies the node within the plugin configuration so that it can be used for input/output connections. Must be valid `snake_case` or `kebab-case`.",
                      "len_min": 1,
                      "len_max": 255,
                      "examples": [
                        {
                          "value": "snake_case"
                        },
                        {
                          "value": "SCREAMING_SNAKE_CASE"
                        },
                        {
                          "value": "kebab-case"
                        },
                        {
                          "value": "KEBAB-CASE"
                        },
                        {
                          "value": "set-property"
                        },
                        {
                          "value": "get-property"
                        },
                        {
                          "value": "send_api_request"
                        },
                        {
                          "value": "filter_01"
                        },
                        {
                          "value": "filter_02"
                        }
                      ],
                      "match_all": [
                        {
                          "pattern": "^[A-Za-z_][A-Za-z0-9_-]*$",
                          "err": "must be a valid identifier"
                        }
                      ],
                      "type": "string",
                      "not_one_of": [
                        "request",
                        "response",
                        "service_request",
                        "service_response",
                        "vault"
                      ],
                      "match_none": [
                        {
                          "pattern": "^_$",
                          "err": "reserved node name"
                        },
                        {
                          "pattern": "^context$",
                          "err": "reserved node name"
                        },
                        {
                          "pattern": "^ctx$",
                          "err": "reserved node name"
                        },
                        {
                          "pattern": "^error$",
                          "err": "reserved node name"
                        },
                        {
                          "pattern": "^globals$",
                          "err": "reserved node name"
                        },
                        {
                          "pattern": "^kong$",
                          "err": "reserved node name"
                        },
                        {
                          "pattern": "^ngx$",
                          "err": "reserved node name"
                        },
                        {
                          "pattern": "^node$",
                          "err": "reserved node name"
                        },
                        {
                          "pattern": "^plan$",
                          "err": "reserved node name"
                        },
                        {
                          "pattern": "^plugin$",
                          "err": "reserved node name"
                        },
                        {
                          "pattern": "^property$",
                          "err": "reserved node name"
                        },
                        {
                          "pattern": "^self$",
                          "err": "reserved node name"
                        },
                        {
                          "pattern": "^static$",
                          "err": "reserved node name"
                        },
                        {
                          "pattern": "^vars$",
                          "err": "reserved node name"
                        }
                      ],
                      "required": true
                    }
                  },
                  {
                    "type": {
                      "required": true,
                      "one_of": [
                        "branch",
                        "cache",
                        "call",
                        "exit",
                        "jq",
                        "property",
                        "static"
                      ],
                      "type": "string"
                    }
                  }
                ],
                "subschema_definitions": {
                  "call": {
                    "description": "Make an external HTTP request",
                    "fields": [
                      {
                        "method": {
                          "description": "A string representing an HTTP method, such as GET, POST, PUT, or DELETE. The string must contain only uppercase letters.",
                          "type": "string",
                          "len_min": 1,
                          "len_max": 32,
                          "default": "GET",
                          "match": "^%u+$"
                        }
                      },
                      {
                        "ssl_server_name": {
                          "description": "A string representing an SNI (server name indication) value for TLS.",
                          "type": "string"
                        }
                      },
                      {
                        "timeout": {
                          "between": [
                            0,
                            2147483646
                          ],
                          "type": "integer",
                          "description": "An integer representing a timeout in milliseconds. Must be between 0 and 2^31-2."
                        }
                      },
                      {
                        "url": {
                          "required": false,
                          "type": "string",
                          "description": "A string representing a URL, such as https://example.com/path/to/resource?q=search."
                        }
                      },
                      {
                        "input": {
                          "description": "call node input",
                          "type": "string",
                          "len_min": 1,
                          "len_max": 255,
                          "match_any": {
                            "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                            "patterns": [
                              "^[A-Za-z_][A-Za-z0-9_-]*$",
                              "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                            ]
                          },
                          "required": false
                        }
                      },
                      {
                        "inputs": {
                          "required": false,
                          "description": "call node inputs",
                          "type": "record",
                          "fields": [
                            {
                              "body": {
                                "description": "HTTP request body",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "headers": {
                                "description": "HTTP request headers",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "http_proxy": {
                                "description": "The HTTP proxy URL. This proxy server will be used for HTTP requests.",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "https_proxy": {
                                "description": "The HTTPS proxy URL. This proxy server will be used for HTTPS requests.",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "proxy_auth_password": {
                                "description": "The password to authenticate with, if the forward proxy is protected by basic authentication.",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "proxy_auth_username": {
                                "description": "The username to authenticate with, if the forward proxy is protected by basic authentication.",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "query": {
                                "description": "HTTP request query",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "url": {
                                "description": "HTTP request URL",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            }
                          ]
                        }
                      },
                      {
                        "output": {
                          "description": "call node output",
                          "type": "string",
                          "len_min": 1,
                          "len_max": 255,
                          "match_any": {
                            "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                            "patterns": [
                              "^[A-Za-z_][A-Za-z0-9_-]*$",
                              "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                            ]
                          },
                          "required": false
                        }
                      },
                      {
                        "outputs": {
                          "required": false,
                          "description": "call node outputs",
                          "type": "record",
                          "fields": [
                            {
                              "body": {
                                "description": "HTTP response body",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "headers": {
                                "description": "HTTP response headers",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "status": {
                                "description": "HTTP response status code",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            }
                          ]
                        }
                      }
                    ],
                    "type": "record",
                    "entity_checks": [
                      {
                        "mutually_exclusive": [
                          "input",
                          "inputs"
                        ]
                      },
                      {
                        "mutually_exclusive": [
                          "output",
                          "outputs"
                        ]
                      }
                    ]
                  },
                  "exit": {
                    "description": "Terminate the request and send a response to the client",
                    "fields": [
                      {
                        "status": {
                          "description": "HTTP status code",
                          "type": "integer",
                          "between": [
                            200,
                            599
                          ],
                          "default": 200,
                          "required": false
                        }
                      },
                      {
                        "warn_headers_sent": {
                          "type": "boolean",
                          "required": false
                        }
                      },
                      {
                        "input": {
                          "description": "exit node input",
                          "type": "string",
                          "len_min": 1,
                          "len_max": 255,
                          "match_any": {
                            "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                            "patterns": [
                              "^[A-Za-z_][A-Za-z0-9_-]*$",
                              "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                            ]
                          },
                          "required": false
                        }
                      },
                      {
                        "inputs": {
                          "required": false,
                          "description": "exit node inputs",
                          "type": "record",
                          "fields": [
                            {
                              "body": {
                                "description": "HTTP response body",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "headers": {
                                "description": "HTTP response headers",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            }
                          ]
                        }
                      }
                    ],
                    "type": "record",
                    "entity_checks": [
                      {
                        "mutually_exclusive": [
                          "input",
                          "inputs"
                        ]
                      }
                    ]
                  },
                  "cache": {
                    "description": "Fetch cached data",
                    "fields": [
                      {
                        "bypass_on_error": {
                          "type": "boolean"
                        }
                      },
                      {
                        "ttl": {
                          "gt": 0,
                          "type": "integer"
                        }
                      },
                      {
                        "input": {
                          "description": "cache node input",
                          "type": "string",
                          "len_min": 1,
                          "len_max": 255,
                          "match_any": {
                            "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                            "patterns": [
                              "^[A-Za-z_][A-Za-z0-9_-]*$",
                              "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                            ]
                          },
                          "required": false
                        }
                      },
                      {
                        "inputs": {
                          "required": false,
                          "description": "cache node inputs",
                          "type": "record",
                          "fields": [
                            {
                              "data": {
                                "description": "The data to be cached.",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "key": {
                                "description": "The cache key.",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "ttl": {
                                "description": "The TTL in seconds.",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            }
                          ]
                        }
                      },
                      {
                        "output": {
                          "description": "cache node output",
                          "type": "string",
                          "len_min": 1,
                          "len_max": 255,
                          "match_any": {
                            "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                            "patterns": [
                              "^[A-Za-z_][A-Za-z0-9_-]*$",
                              "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                            ]
                          },
                          "required": false
                        }
                      },
                      {
                        "outputs": {
                          "required": false,
                          "description": "cache node outputs",
                          "type": "record",
                          "fields": [
                            {
                              "data": {
                                "description": "The data that was cached.",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "hit": {
                                "description": "Signals a cache hit.",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "miss": {
                                "description": "Signals a cache miss.",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "stored": {
                                "description": "Signals whether data was stored in cache.",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            }
                          ]
                        }
                      }
                    ],
                    "type": "record",
                    "entity_checks": [
                      {
                        "mutually_exclusive": [
                          "input",
                          "inputs"
                        ]
                      },
                      {
                        "mutually_exclusive": [
                          "output",
                          "outputs"
                        ]
                      }
                    ]
                  },
                  "jq": {
                    "description": "Process data using `jq` syntax",
                    "fields": [
                      {
                        "jq": {
                          "required": true,
                          "type": "string",
                          "len_min": 1,
                          "len_max": 10240,
                          "description": "The jq filter text. Refer to https://jqlang.org/manual/ for full documentation."
                        }
                      },
                      {
                        "input": {
                          "description": "filter input(s)",
                          "type": "string",
                          "len_min": 1,
                          "len_max": 255,
                          "match_any": {
                            "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                            "patterns": [
                              "^[A-Za-z_][A-Za-z0-9_-]*$",
                              "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                            ]
                          },
                          "required": false
                        }
                      },
                      {
                        "inputs": {
                          "description": "filter input(s)",
                          "type": "map",
                          "values": {
                            "len_max": 255,
                            "len_min": 1,
                            "type": "string",
                            "match_any": {
                              "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                              "patterns": [
                                "^[A-Za-z_][A-Za-z0-9_-]*$",
                                "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                              ]
                            }
                          },
                          "keys": {
                            "len_max": 255,
                            "type": "string",
                            "len_min": 1
                          },
                          "required": false
                        }
                      },
                      {
                        "output": {
                          "description": "filter output(s)",
                          "type": "string",
                          "len_min": 1,
                          "len_max": 255,
                          "match_any": {
                            "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                            "patterns": [
                              "^[A-Za-z_][A-Za-z0-9_-]*$",
                              "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                            ]
                          },
                          "required": false
                        }
                      }
                    ],
                    "type": "record",
                    "entity_checks": [
                      {
                        "mutually_exclusive": [
                          "input",
                          "inputs"
                        ]
                      }
                    ]
                  },
                  "static": {
                    "description": "Produce reusable outputs from statically-configured values",
                    "fields": [
                      {
                        "values": {
                          "description": "An object with string keys and freeform values",
                          "required": true,
                          "type": "json",
                          "json_schema": {
                            "inline": {
                              "type": "object"
                            }
                          }
                        }
                      },
                      {
                        "output": {
                          "description": "The entire `.values` map",
                          "type": "string",
                          "len_min": 1,
                          "len_max": 255,
                          "match_any": {
                            "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                            "patterns": [
                              "^[A-Za-z_][A-Za-z0-9_-]*$",
                              "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                            ]
                          },
                          "required": false
                        }
                      },
                      {
                        "outputs": {
                          "description": "Individual items from `.values`, referenced by key",
                          "type": "map",
                          "keys": {
                            "len_max": 255,
                            "type": "string",
                            "len_min": 1
                          },
                          "values": {
                            "len_max": 255,
                            "len_min": 1,
                            "type": "string",
                            "match_any": {
                              "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                              "patterns": [
                                "^[A-Za-z_][A-Za-z0-9_-]*$",
                                "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                              ]
                            }
                          },
                          "required": false
                        }
                      }
                    ],
                    "type": "record",
                    "entity_checks": [
                      {
                        "mutually_exclusive": [
                          "output",
                          "outputs"
                        ]
                      }
                    ]
                  },
                  "property": {
                    "description": "Get or set a property",
                    "type": "record",
                    "fields": [
                      {
                        "content_type": {
                          "required": false,
                          "description": "The expected mime type of the property value. When set to `application/json`, SET operations will JSON-encode input data before writing it, and GET operations will JSON-decode output data after reading it. Otherwise, this setting has no effect.",
                          "type": "string",
                          "one_of": [
                            "application/json",
                            "text/plain",
                            "application/octet-stream"
                          ]
                        }
                      },
                      {
                        "property": {
                          "required": true,
                          "type": "string",
                          "len_min": 1,
                          "len_max": 255,
                          "description": "The property name to get/set"
                        }
                      },
                      {
                        "input": {
                          "description": "Property input source. When connected, this node operates in SET mode and writes input data to the property. Otherwise, the node operates in GET mode and reads the property.",
                          "type": "string",
                          "len_min": 1,
                          "len_max": 255,
                          "match_any": {
                            "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                            "patterns": [
                              "^[A-Za-z_][A-Za-z0-9_-]*$",
                              "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                            ]
                          },
                          "required": false
                        }
                      },
                      {
                        "output": {
                          "description": "Property output. This can be connected regardless of whether the node is operating in GET mode or SET mode.",
                          "type": "string",
                          "len_min": 1,
                          "len_max": 255,
                          "match_any": {
                            "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                            "patterns": [
                              "^[A-Za-z_][A-Za-z0-9_-]*$",
                              "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                            ]
                          },
                          "required": false
                        }
                      }
                    ]
                  },
                  "branch": {
                    "description": "Execute different nodes based on some input condition",
                    "fields": [
                      {
                        "else": {
                          "required": false,
                          "type": "array",
                          "len_min": 1,
                          "len_max": 64,
                          "elements": {
                            "description": "A label that uniquely identifies the node within the plugin configuration so that it can be used for input/output connections. Must be valid `snake_case` or `kebab-case`.",
                            "len_min": 1,
                            "len_max": 255,
                            "examples": [
                              {
                                "value": "snake_case"
                              },
                              {
                                "value": "SCREAMING_SNAKE_CASE"
                              },
                              {
                                "value": "kebab-case"
                              },
                              {
                                "value": "KEBAB-CASE"
                              },
                              {
                                "value": "set-property"
                              },
                              {
                                "value": "get-property"
                              },
                              {
                                "value": "send_api_request"
                              },
                              {
                                "value": "filter_01"
                              },
                              {
                                "value": "filter_02"
                              }
                            ],
                            "match_all": [
                              {
                                "pattern": "^[A-Za-z_][A-Za-z0-9_-]*$",
                                "err": "must be a valid identifier"
                              }
                            ],
                            "type": "string",
                            "not_one_of": [
                              "request",
                              "response",
                              "service_request",
                              "service_response",
                              "vault"
                            ],
                            "match_none": [
                              {
                                "pattern": "^_$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^context$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^ctx$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^error$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^globals$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^kong$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^ngx$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^node$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^plan$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^plugin$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^property$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^self$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^static$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^vars$",
                                "err": "reserved node name"
                              }
                            ],
                            "required": true
                          },
                          "description": "nodes to execute if the input condition is `false`"
                        }
                      },
                      {
                        "then": {
                          "required": false,
                          "type": "array",
                          "len_min": 1,
                          "len_max": 64,
                          "elements": {
                            "description": "A label that uniquely identifies the node within the plugin configuration so that it can be used for input/output connections. Must be valid `snake_case` or `kebab-case`.",
                            "len_min": 1,
                            "len_max": 255,
                            "examples": [
                              {
                                "value": "snake_case"
                              },
                              {
                                "value": "SCREAMING_SNAKE_CASE"
                              },
                              {
                                "value": "kebab-case"
                              },
                              {
                                "value": "KEBAB-CASE"
                              },
                              {
                                "value": "set-property"
                              },
                              {
                                "value": "get-property"
                              },
                              {
                                "value": "send_api_request"
                              },
                              {
                                "value": "filter_01"
                              },
                              {
                                "value": "filter_02"
                              }
                            ],
                            "match_all": [
                              {
                                "pattern": "^[A-Za-z_][A-Za-z0-9_-]*$",
                                "err": "must be a valid identifier"
                              }
                            ],
                            "type": "string",
                            "not_one_of": [
                              "request",
                              "response",
                              "service_request",
                              "service_response",
                              "vault"
                            ],
                            "match_none": [
                              {
                                "pattern": "^_$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^context$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^ctx$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^error$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^globals$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^kong$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^ngx$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^node$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^plan$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^plugin$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^property$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^self$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^static$",
                                "err": "reserved node name"
                              },
                              {
                                "pattern": "^vars$",
                                "err": "reserved node name"
                              }
                            ],
                            "required": true
                          },
                          "description": "nodes to execute if the input condition is `true`"
                        }
                      },
                      {
                        "input": {
                          "description": "branch node input",
                          "type": "string",
                          "len_min": 1,
                          "len_max": 255,
                          "match_any": {
                            "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                            "patterns": [
                              "^[A-Za-z_][A-Za-z0-9_-]*$",
                              "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                            ]
                          },
                          "required": false
                        }
                      },
                      {
                        "output": {
                          "description": "branch node output",
                          "type": "string",
                          "len_min": 1,
                          "len_max": 255,
                          "match_any": {
                            "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                            "patterns": [
                              "^[A-Za-z_][A-Za-z0-9_-]*$",
                              "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                            ]
                          },
                          "required": false
                        }
                      },
                      {
                        "outputs": {
                          "required": false,
                          "description": "branch node outputs",
                          "type": "record",
                          "fields": [
                            {
                              "else": {
                                "description": "node output",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            },
                            {
                              "then": {
                                "description": "node output",
                                "type": "string",
                                "len_min": 1,
                                "len_max": 255,
                                "match_any": {
                                  "err": "must be one of NODE_NAME or NODE_NAME.FIELD",
                                  "patterns": [
                                    "^[A-Za-z_][A-Za-z0-9_-]*$",
                                    "^[A-Za-z_][A-Za-z0-9_-]*%..+$"
                                  ]
                                },
                                "required": false
                              }
                            }
                          ]
                        }
                      }
                    ],
                    "type": "record",
                    "entity_checks": [
                      {
                        "at_least_one_of": [
                          "then",
                          "else"
                        ]
                      },
                      {
                        "mutually_exclusive": [
                          "output",
                          "outputs"
                        ]
                      }
                    ]
                  }
                },
                "subschema_key": "type"
              }
            }
          },
          {
            "resources": {
              "required": false,
              "type": "record",
              "fields": [
                {
                  "cache": {
                    "required": false,
                    "type": "record",
                    "fields": [
                      {
                        "strategy": {
                          "description": "The backing data store in which to hold cache entities. Accepted values are: `memory` and `redis`.",
                          "required": false,
                          "one_of": [
                            "memory",
                            "redis"
                          ],
                          "type": "string"
                        }
                      },
                      {
                        "memory": {
                          "fields": [
                            {
                              "dictionary_name": {
                                "description": "The name of the shared dictionary in which to hold cache entities when the memory strategy is selected. Note that this dictionary currently must be defined manually in the Kong Nginx template.",
                                "default": "kong_db_cache",
                                "type": "string",
                                "required": false
                              }
                            }
                          ],
                          "type": "record",
                          "required": true
                        }
                      },
                      {
                        "redis": {
                          "fields": [
                            {
                              "host": {
                                "description": "A string representing a host name, such as example.com.",
                                "referenceable": true,
                                "type": "string",
                                "default": "127.0.0.1"
                              }
                            },
                            {
                              "port": {
                                "description": "An integer representing a port number between 0 and 65535, inclusive.",
                                "type": "integer",
                                "between": [
                                  0,
                                  65535
                                ],
                                "referenceable": true,
                                "default": 6379
                              }
                            },
                            {
                              "connect_timeout": {
                                "between": [
                                  0,
                                  2147483646
                                ],
                                "default": 2000,
                                "type": "integer",
                                "description": "An integer representing a timeout in milliseconds. Must be between 0 and 2^31-2."
                              }
                            },
                            {
                              "send_timeout": {
                                "between": [
                                  0,
                                  2147483646
                                ],
                                "default": 2000,
                                "type": "integer",
                                "description": "An integer representing a timeout in milliseconds. Must be between 0 and 2^31-2."
                              }
                            },
                            {
                              "read_timeout": {
                                "between": [
                                  0,
                                  2147483646
                                ],
                                "default": 2000,
                                "type": "integer",
                                "description": "An integer representing a timeout in milliseconds. Must be between 0 and 2^31-2."
                              }
                            },
                            {
                              "username": {
                                "description": "Username to use for Redis connections. If undefined, ACL authentication won't be performed. This requires Redis v6.0.0+. To be compatible with Redis v5.x.y, you can set it to `default`.",
                                "referenceable": true,
                                "type": "string"
                              }
                            },
                            {
                              "password": {
                                "encrypted": true,
                                "referenceable": true,
                                "type": "string",
                                "description": "Password to use for Redis connections. If undefined, no AUTH commands are sent to Redis."
                              }
                            },
                            {
                              "sentinel_username": {
                                "description": "Sentinel username to authenticate with a Redis Sentinel instance. If undefined, ACL authentication won't be performed. This requires Redis v6.2.0+.",
                                "referenceable": true,
                                "type": "string"
                              }
                            },
                            {
                              "sentinel_password": {
                                "encrypted": true,
                                "referenceable": true,
                                "type": "string",
                                "description": "Sentinel password to authenticate with a Redis Sentinel instance. If undefined, no AUTH commands are sent to Redis Sentinels."
                              }
                            },
                            {
                              "cloud_authentication": {
                                "required": false,
                                "type": "record",
                                "entity_checks": [
                                  {
                                    "mutually_required": [
                                      "aws_access_key_id",
                                      "aws_secret_access_key"
                                    ]
                                  },
                                  {
                                    "mutually_required": [
                                      "aws_assume_role_arn",
                                      "aws_role_session_name"
                                    ]
                                  },
                                  {
                                    "custom_entity_check": {
                                      "field_sources": [
                                        "auth_provider",
                                        "aws_cache_name"
                                      ]
                                    }
                                  }
                                ],
                                "description": "Cloud auth related configs for connecting to a Cloud Provider's Redis instance.",
                                "fields": [
                                  {
                                    "auth_provider": {
                                      "description": "Auth providers to be used to authenticate to a Cloud Provider's Redis instance.",
                                      "type": "string",
                                      "one_of": [
                                        "aws",
                                        "gcp",
                                        "azure"
                                      ]
                                    }
                                  },
                                  {
                                    "aws_cache_name": {
                                      "description": "The name of the AWS Elasticache cluster when `auth_provider` is set to `aws`.",
                                      "referenceable": true,
                                      "type": "string"
                                    }
                                  },
                                  {
                                    "aws_region": {
                                      "description": "The region of the AWS ElastiCache cluster when `auth_provider` is set to `aws`.",
                                      "referenceable": true,
                                      "type": "string"
                                    }
                                  },
                                  {
                                    "aws_is_serverless": {
                                      "required": false,
                                      "default": true,
                                      "type": "boolean",
                                      "description": "This flag specifies whether the cluster is serverless when auth_provider is set to `aws`."
                                    }
                                  },
                                  {
                                    "aws_access_key_id": {
                                      "encrypted": true,
                                      "referenceable": true,
                                      "type": "string",
                                      "description": "AWS Access Key ID to be used for authentication when `auth_provider` is set to `aws`."
                                    }
                                  },
                                  {
                                    "aws_secret_access_key": {
                                      "encrypted": true,
                                      "referenceable": true,
                                      "type": "string",
                                      "description": "AWS Secret Access Key to be used for authentication when `auth_provider` is set to `aws`."
                                    }
                                  },
                                  {
                                    "aws_assume_role_arn": {
                                      "encrypted": true,
                                      "referenceable": true,
                                      "type": "string",
                                      "description": "The ARN of the IAM role to assume for generating ElastiCache IAM authentication tokens."
                                    }
                                  },
                                  {
                                    "aws_role_session_name": {
                                      "encrypted": true,
                                      "referenceable": true,
                                      "type": "string",
                                      "description": "The session name for the temporary credentials when assuming the IAM role."
                                    }
                                  },
                                  {
                                    "gcp_service_account_json": {
                                      "encrypted": true,
                                      "referenceable": true,
                                      "type": "string",
                                      "description": "GCP Service Account JSON to be used for authentication when `auth_provider` is set to `gcp`."
                                    }
                                  },
                                  {
                                    "azure_client_id": {
                                      "encrypted": true,
                                      "referenceable": true,
                                      "type": "string",
                                      "description": "Azure Client ID to be used for authentication when `auth_provider` is set to `azure`."
                                    }
                                  },
                                  {
                                    "azure_client_secret": {
                                      "encrypted": true,
                                      "referenceable": true,
                                      "type": "string",
                                      "description": "Azure Client Secret to be used for authentication when `auth_provider` is set to `azure`."
                                    }
                                  },
                                  {
                                    "azure_tenant_id": {
                                      "encrypted": true,
                                      "referenceable": true,
                                      "type": "string",
                                      "description": "Azure Tenant ID to be used for authentication when `auth_provider` is set to `azure`."
                                    }
                                  }
                                ]
                              }
                            },
                            {
                              "database": {
                                "description": "Database to use for the Redis connection when using the `redis` strategy",
                                "default": 0,
                                "type": "integer"
                              }
                            },
                            {
                              "keepalive_pool_size": {
                                "description": "The size limit for every cosocket connection pool associated with every remote server, per worker process. If neither `keepalive_pool_size` nor `keepalive_backlog` is specified, no pool is created. If `keepalive_pool_size` isn't specified but `keepalive_backlog` is specified, then the pool uses the default value. Try to increase (e.g. 512) this value if latency is high or throughput is low.",
                                "default": 256,
                                "type": "integer",
                                "between": [
                                  1,
                                  2147483646
                                ]
                              }
                            },
                            {
                              "keepalive_backlog": {
                                "description": "Limits the total number of opened connections for a pool. If the connection pool is full, connection queues above the limit go into the backlog queue. If the backlog queue is full, subsequent connect operations fail and return `nil`. Queued operations (subject to set timeouts) resume once the number of connections in the pool is less than `keepalive_pool_size`. If latency is high or throughput is low, try increasing this value. Empirically, this value is larger than `keepalive_pool_size`.",
                                "type": "integer",
                                "between": [
                                  0,
                                  2147483646
                                ]
                              }
                            },
                            {
                              "sentinel_master": {
                                "type": "string",
                                "description": "Sentinel master to use for Redis connections. Defining this value implies using Redis Sentinel."
                              }
                            },
                            {
                              "sentinel_role": {
                                "description": "Sentinel role to use for Redis connections when the `redis` strategy is defined. Defining this value implies using Redis Sentinel.",
                                "type": "string",
                                "one_of": [
                                  "master",
                                  "slave",
                                  "any"
                                ]
                              }
                            },
                            {
                              "sentinel_nodes": {
                                "required": false,
                                "type": "array",
                                "len_min": 1,
                                "elements": {
                                  "type": "record",
                                  "fields": [
                                    {
                                      "host": {
                                        "required": true,
                                        "default": "127.0.0.1",
                                        "type": "string",
                                        "description": "A string representing a host name, such as example.com."
                                      }
                                    },
                                    {
                                      "port": {
                                        "between": [
                                          0,
                                          65535
                                        ],
                                        "default": 6379,
                                        "type": "integer",
                                        "description": "An integer representing a port number between 0 and 65535, inclusive."
                                      }
                                    }
                                  ]
                                },
                                "description": "Sentinel node addresses to use for Redis connections when the `redis` strategy is defined. Defining this field implies using a Redis Sentinel. The minimum length of the array is 1 element."
                              }
                            },
                            {
                              "cluster_nodes": {
                                "required": false,
                                "type": "array",
                                "len_min": 1,
                                "elements": {
                                  "type": "record",
                                  "fields": [
                                    {
                                      "ip": {
                                        "required": true,
                                        "default": "127.0.0.1",
                                        "type": "string",
                                        "description": "A string representing a host name, such as example.com."
                                      }
                                    },
                                    {
                                      "port": {
                                        "between": [
                                          0,
                                          65535
                                        ],
                                        "default": 6379,
                                        "type": "integer",
                                        "description": "An integer representing a port number between 0 and 65535, inclusive."
                                      }
                                    }
                                  ]
                                },
                                "description": "Cluster addresses to use for Redis connections when the `redis` strategy is defined. Defining this field implies using a Redis Cluster. The minimum length of the array is 1 element."
                              }
                            },
                            {
                              "ssl": {
                                "required": false,
                                "default": false,
                                "type": "boolean",
                                "description": "If set to true, uses SSL to connect to Redis."
                              }
                            },
                            {
                              "ssl_verify": {
                                "required": false,
                                "default": false,
                                "type": "boolean",
                                "description": "If set to true, verifies the validity of the server SSL certificate. If setting this parameter, also configure `lua_ssl_trusted_certificate` in `kong.conf` to specify the CA (or server) certificate used by your Redis server. You may also need to configure `lua_ssl_verify_depth` accordingly."
                              }
                            },
                            {
                              "server_name": {
                                "required": false,
                                "referenceable": true,
                                "type": "string",
                                "description": "A string representing an SNI (server name indication) value for TLS."
                              }
                            },
                            {
                              "cluster_max_redirections": {
                                "required": false,
                                "default": 5,
                                "type": "integer",
                                "description": "Maximum retry attempts for redirection."
                              }
                            },
                            {
                              "connection_is_proxied": {
                                "required": false,
                                "default": false,
                                "type": "boolean",
                                "description": "If the connection to Redis is proxied (e.g. Envoy), set it `true`. Set the `host` and `port` to point to the proxy address."
                              }
                            }
                          ],
                          "type": "record",
                          "entity_checks": [
                            {
                              "mutually_required": [
                                "host",
                                "port"
                              ]
                            },
                            {
                              "mutually_required": [
                                "sentinel_master",
                                "sentinel_role",
                                "sentinel_nodes"
                              ]
                            },
                            {
                              "mutually_required": [
                                "connect_timeout",
                                "send_timeout",
                                "read_timeout"
                              ]
                            },
                            {
                              "conditional": {
                                "then_field": "host",
                                "if_field": "connection_is_proxied",
                                "then_match": {
                                  "required": true
                                },
                                "if_match": {
                                  "eq": true
                                }
                              }
                            },
                            {
                              "custom_entity_check": {
                                "field_sources": [
                                  "database",
                                  "connection_is_proxied"
                                ],
                                "run_with_missing_fields": true
                              }
                            },
                            {
                              "custom_entity_check": {
                                "field_sources": [
                                  "cluster_nodes",
                                  "connection_is_proxied"
                                ],
                                "run_with_missing_fields": true
                              }
                            },
                            {
                              "custom_entity_check": {
                                "field_sources": [
                                  "sentinel_role",
                                  "connection_is_proxied"
                                ],
                                "run_with_missing_fields": true
                              }
                            }
                          ],
                          "shorthand_fields": [
                            {
                              "timeout": {
                                "deprecation": {
                                  "message": "redis schema field `timeout` is deprecated, use `connect_timeout`, `send_timeout` and `read_timeout`",
                                  "replaced_with": [
                                    {
                                      "path": [
                                        "connect_timeout"
                                      ]
                                    },
                                    {
                                      "path": [
                                        "send_timeout"
                                      ]
                                    },
                                    {
                                      "path": [
                                        "read_timeout"
                                      ]
                                    }
                                  ],
                                  "removal_in_version": "4.0"
                                },
                                "type": "integer"
                              }
                            },
                            {
                              "sentinel_addresses": {
                                "elements": {
                                  "type": "string"
                                },
                                "deprecation": {
                                  "message": "sentinel_addresses is deprecated, please use sentinel_nodes instead",
                                  "replaced_with": [
                                    {
                                      "path": [
                                        "sentinel_nodes"
                                      ]
                                    }
                                  ],
                                  "removal_in_version": "4.0"
                                },
                                "type": "array",
                                "len_min": 1
                              }
                            },
                            {
                              "cluster_addresses": {
                                "elements": {
                                  "type": "string"
                                },
                                "deprecation": {
                                  "message": "cluster_addresses is deprecated, please use cluster_nodes instead",
                                  "replaced_with": [
                                    {
                                      "path": [
                                        "cluster_nodes"
                                      ]
                                    }
                                  ],
                                  "removal_in_version": "4.0"
                                },
                                "type": "array",
                                "len_min": 1
                              }
                            }
                          ],
                          "required": true
                        }
                      }
                    ]
                  }
                },
                {
                  "vault": {
                    "required": false,
                    "type": "map",
                    "len_min": 1,
                    "len_max": 64,
                    "keys": {
                      "len_max": 255,
                      "match_all": [
                        {
                          "pattern": "^[A-Za-z_][A-Za-z0-9_-]*$",
                          "err": "must be a valid identifier"
                        }
                      ],
                      "type": "string",
                      "len_min": 1
                    },
                    "values": {
                      "required": true,
                      "type": "string",
                      "len_min": 1,
                      "len_max": 4095,
                      "referenceable": true
                    }
                  }
                }
              ]
            }
          },
          {
            "debug": {
              "required": false,
              "default": false,
              "type": "boolean"
            }
          }
        ]
      }
    }
  ],
  "supported_partials": {
    "redis-ee": [
      "config.resources.cache.redis"
    ]
  },
  "entity_checks": [
    {
      "custom_entity_check": {
        "pass_errors_to_checker": true,
        "field_sources": [
          "config"
        ]
      }
    }
  ]
}